import{c as R,e as A,p as J,a as vt,d as m,h as x,f as ke,i as I,l as ue,g as X,w,o as j,j as ee,n as ze,k as mt,m as qe,q as ht,r as gt,s as S,t as Fe,u as le,v as pe,x as re,y as pt,z as yt,A as bt,B as T,C as M,D as $,E as q,Q as se,F as N,G as P,H as We,P as _t,I as wt,J as G,K as Ct,L as ie,M as ye,N as Ee,O as be,R as Se,S as _e,T as qt,U as St,V as $t,W as xt,X as kt,Y as zt,Z as Lt,_ as Tt,$ as $e,a0 as Ae,a1 as Ot,a2 as Z,a3 as Bt,a4 as te,a5 as je,a6 as Le,a7 as Dt,a8 as Xe,a9 as Ye,aa as Mt,ab as Pt,ac as Et,ad as At,ae as Vt,af as Qt,ag as Nt,ah as Ve,ai as Ut,aj as Ht,ak as It,al as Rt,am as Ft,an as Wt,ao as jt}from"./index.e4f63a73.js";import{Q as Te,u as Xt,a as Ke,b as Ge,g as Yt}from"./query.a5f8bb49.js";var Kt=R({name:"QPageContainer",setup(e,{slots:n}){const{proxy:{$q:r}}=X(),l=I(ue,A);if(l===A)return console.error("QPageContainer needs to be child of QLayout"),A;J(vt,!0);const t=m(()=>{const a={};return l.header.space===!0&&(a.paddingTop=`${l.header.size}px`),l.right.space===!0&&(a[`padding${r.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(a.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(a[`padding${r.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),a});return()=>x("div",{class:"q-page-container",style:t.value},ke(n.default))}});const{passive:Qe}=qe,Gt=["both","horizontal","vertical"];var Jt=R({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Gt.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:n}){const r={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,t,a;w(()=>e.scrollTarget,()=>{u(),f()});function c(){l!==null&&l();const h=Math.max(0,ht(t)),_=gt(t),d={top:h-r.position.top,left:_-r.position.left};if(e.axis==="vertical"&&d.top===0||e.axis==="horizontal"&&d.left===0)return;const g=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";r.position={top:h,left:_},r.directionChanged=r.direction!==g,r.delta=d,r.directionChanged===!0&&(r.direction=g,r.inflectionPoint=r.position),n("scroll",{...r})}function f(){t=mt(a,e.scrollTarget),t.addEventListener("scroll",s,Qe),s(!0)}function u(){t!==void 0&&(t.removeEventListener("scroll",s,Qe),t=void 0)}function s(h){if(h===!0||e.debounce===0||e.debounce==="0")c();else if(l===null){const[_,d]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];l=()=>{d(_),l=null}}}const{proxy:o}=X();return w(()=>o.$q.lang.rtl,c),j(()=>{a=o.$el.parentNode,f()}),ee(()=>{l!==null&&l(),u()}),Object.assign(o,{trigger:s,getPosition:()=>r}),ze}});function Zt(){const e=S(!Fe.value);return e.value===!1&&j(()=>{e.value=!0}),e}const Je=typeof ResizeObserver!="undefined",Ne=Je===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var xe=R({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:n}){let r=null,l,t={width:-1,height:-1};function a(u){u===!0||e.debounce===0||e.debounce==="0"?c():r===null&&(r=setTimeout(c,e.debounce))}function c(){if(r!==null&&(clearTimeout(r),r=null),l){const{offsetWidth:u,offsetHeight:s}=l;(u!==t.width||s!==t.height)&&(t={width:u,height:s},n("resize",t))}}const{proxy:f}=X();if(Je===!0){let u;const s=o=>{l=f.$el.parentNode,l?(u=new ResizeObserver(a),u.observe(l),c()):o!==!0&&le(()=>{s(!0)})};return j(()=>{s()}),ee(()=>{r!==null&&clearTimeout(r),u!==void 0&&(u.disconnect!==void 0?u.disconnect():l&&u.unobserve(l))}),ze}else{let o=function(){r!==null&&(clearTimeout(r),r=null),s!==void 0&&(s.removeEventListener!==void 0&&s.removeEventListener("resize",a,qe.passive),s=void 0)},h=function(){o(),l&&l.contentDocument&&(s=l.contentDocument.defaultView,s.addEventListener("resize",a,qe.passive),c())};const u=Zt();let s;return j(()=>{le(()=>{l=f.$el,l&&h()})}),ee(o),f.trigger=a,()=>{if(u.value===!0)return x("object",{style:Ne.style,tabindex:-1,type:"text/html",data:Ne.url,"aria-hidden":"true",onLoad:h})}}}}),ea=R({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:n,emit:r}){const{proxy:{$q:l}}=X(),t=S(null),a=S(l.screen.height),c=S(e.container===!0?0:l.screen.width),f=S({position:0,direction:"down",inflectionPoint:0}),u=S(0),s=S(Fe.value===!0?0:pe()),o=m(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),h=m(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),_=m(()=>s.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),d=m(()=>s.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function g(y){if(e.container===!0||document.qScrollPrevented!==!0){const C={position:y.position.top,direction:y.direction,directionChanged:y.directionChanged,inflectionPoint:y.inflectionPoint.top,delta:y.delta.top};f.value=C,e.onScroll!==void 0&&r("scroll",C)}}function B(y){const{height:C,width:O}=y;let U=!1;a.value!==C&&(U=!0,a.value=C,e.onScrollHeight!==void 0&&r("scrollHeight",C),b()),c.value!==O&&(U=!0,c.value=O),U===!0&&e.onResize!==void 0&&r("resize",y)}function k({height:y}){u.value!==y&&(u.value=y,b())}function b(){if(e.container===!0){const y=a.value>u.value?pe():0;s.value!==y&&(s.value=y)}}let v=null;const z={instances:{},view:m(()=>e.view),isContainer:m(()=>e.container),rootRef:t,height:a,containerHeight:u,scrollbarWidth:s,totalWidth:m(()=>c.value+s.value),rows:m(()=>{const y=e.view.toLowerCase().split(" ");return{top:y[0].split(""),middle:y[1].split(""),bottom:y[2].split("")}}),header:re({size:0,offset:0,space:!1}),right:re({size:300,offset:0,space:!1}),footer:re({size:0,offset:0,space:!1}),left:re({size:300,offset:0,space:!1}),scroll:f,animate(){v!==null?clearTimeout(v):document.body.classList.add("q-body--layout-animate"),v=setTimeout(()=>{v=null,document.body.classList.remove("q-body--layout-animate")},155)},update(y,C,O){z[y][C]=O}};if(J(ue,z),pe()>0){let O=function(){y=null,C.classList.remove("hide-scrollbar")},U=function(){if(y===null){if(C.scrollHeight>l.screen.height)return;C.classList.add("hide-scrollbar")}else clearTimeout(y);y=setTimeout(O,300)},Y=function(H){y!==null&&H==="remove"&&(clearTimeout(y),O()),window[`${H}EventListener`]("resize",U)},y=null;const C=document.body;w(()=>e.container!==!0?"add":"remove",Y),e.container!==!0&&Y("add"),pt(()=>{Y("remove")})}return()=>{const y=yt(n.default,[x(Jt,{onScroll:g}),x(xe,{onResize:B})]),C=x("div",{class:o.value,style:h.value,ref:e.container===!0?void 0:t,tabindex:-1},y);return e.container===!0?x("div",{class:"q-layout-container overflow-hidden",ref:t},[x(xe,{onResize:k}),x("div",{class:"absolute-full",style:_.value},[x("div",{class:"scroll",style:d.value},[C])])]):C}}}),ta=R({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:n}){const r=m(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>x("div",{class:r.value,role:"toolbar"},ke(n.default))}}),aa=R({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:r}){const{proxy:{$q:l}}=X(),t=I(ue,A);if(t===A)return console.error("QHeader needs to be child of QLayout"),A;const a=S(parseInt(e.heightHint,10)),c=S(!0),f=m(()=>e.reveal===!0||t.view.value.indexOf("H")>-1||l.platform.is.ios&&t.isContainer.value===!0),u=m(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return c.value===!0?a.value:0;const v=a.value-t.scroll.value.position;return v>0?v:0}),s=m(()=>e.modelValue!==!0||f.value===!0&&c.value!==!0),o=m(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),h=m(()=>"q-header q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),_=m(()=>{const v=t.rows.value.top,z={};return v[0]==="l"&&t.left.space===!0&&(z[l.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),v[2]==="r"&&t.right.space===!0&&(z[l.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),z});function d(v,z){t.update("header",v,z)}function g(v,z){v.value!==z&&(v.value=z)}function B({height:v}){g(a,v),d("size",v)}function k(v){o.value===!0&&g(c,!0),r("focusin",v)}w(()=>e.modelValue,v=>{d("space",v),g(c,!0),t.animate()}),w(u,v=>{d("offset",v)}),w(()=>e.reveal,v=>{v===!1&&g(c,e.modelValue)}),w(c,v=>{t.animate(),r("reveal",v)}),w(t.scroll,v=>{e.reveal===!0&&g(c,v.direction==="up"||v.position<=e.revealOffset||v.position-v.inflectionPoint<100)});const b={};return t.instances.header=b,e.modelValue===!0&&d("size",a.value),d("space",e.modelValue),d("offset",u.value),ee(()=>{t.instances.header===b&&(t.instances.header=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const v=bt(n.default,[]);return e.elevated===!0&&v.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),v.push(x(xe,{debounce:0,onResize:B})),x("header",{class:h.value,style:_.value,onFocusin:k},v)}}});const na=P("div",{class:"q-ml-md"},[P("div",{id:"user-button"})],-1),ra={__name:"MainHeader",setup(e){const n=I("toggleLeftDrawer");return(r,l)=>(T(),M(aa,null,{default:$(()=>[q(ta,{class:"items-center justify-between"},{default:$(()=>[q(se,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:N(n)},null,8,["onClick"]),P("div",null,[q(Te,{id:"auth-links"},{default:$(()=>[q(se,{onClick:N(Xt).login},{default:$(()=>[We(" \u0412\u043E\u0439\u0442\u0438 ")]),_:1},8,["onClick"])]),_:1}),na])]),_:1})]),_:1}))}},Oe={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},ia=Object.keys(Oe);Oe.all=!0;function Ue(e){const n={};for(const r of ia)e[r]===!0&&(n[r]=!0);return Object.keys(n).length===0?Oe:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function He(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function oa(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),_t.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function we(e,n,r){const l=Se(e);let t,a=l.left-n.event.x,c=l.top-n.event.y,f=Math.abs(a),u=Math.abs(c);const s=n.direction;s.horizontal===!0&&s.vertical!==!0?t=a<0?"left":"right":s.horizontal!==!0&&s.vertical===!0?t=c<0?"up":"down":s.up===!0&&c<0?(t="up",f>u&&(s.left===!0&&a<0?t="left":s.right===!0&&a>0&&(t="right"))):s.down===!0&&c>0?(t="down",f>u&&(s.left===!0&&a<0?t="left":s.right===!0&&a>0&&(t="right"))):s.left===!0&&a<0?(t="left",f<u&&(s.up===!0&&c<0?t="up":s.down===!0&&c>0&&(t="down"))):s.right===!0&&a>0&&(t="right",f<u&&(s.up===!0&&c<0?t="up":s.down===!0&&c>0&&(t="down")));let o=!1;if(t===void 0&&r===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};t=n.event.lastDir,o=!0,t==="left"||t==="right"?(l.left-=a,f=0,a=0):(l.top-=c,u=0,c=0)}return{synthetic:o,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:l,direction:t,isFirst:n.event.isFirst,isFinal:r===!0,duration:Date.now()-n.event.time,distance:{x:f,y:u},offset:{x:a,y:c},delta:{x:l.left-n.event.lastX,y:l.top-n.event.lastY}}}}let la=0;var Ce=wt({name:"touch-pan",beforeMount(e,{value:n,modifiers:r}){if(r.mouse!==!0&&G.has.touch!==!0)return;function l(a,c){r.mouse===!0&&c===!0?qt(a):(r.stop===!0&&be(a),r.prevent===!0&&Ee(a))}const t={uid:"qvtp_"+la++,handler:n,modifiers:r,direction:Ue(r),noop:ze,mouseStart(a){He(a,t)&&Ct(a)&&(ie(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(a,!0))},touchStart(a){if(He(a,t)){const c=a.target;ie(t,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),t.start(a)}},start(a,c){if(G.is.firefox===!0&&ye(e,!0),t.lastEvt=a,c===!0||r.stop===!0){if(t.direction.all!==!0&&(c!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const s=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Ee(s),a.cancelBubble===!0&&be(s),Object.assign(s,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[t.uid]:a.qClonedBy.concat(t.uid)}),t.initialEvent={target:a.target,event:s}}be(a)}const{left:f,top:u}=Se(a);t.event={x:f,y:u,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:f,lastY:u}},move(a){if(t.event===void 0)return;const c=Se(a),f=c.left-t.event.x,u=c.top-t.event.y;if(f===0&&u===0)return;t.lastEvt=a;const s=t.event.mouse===!0,o=()=>{l(a,s);let d;r.preserveCursor!==!0&&r.preservecursor!==!0&&(d=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),s===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),oa(),t.styleCleanup=g=>{if(t.styleCleanup=void 0,d!==void 0&&(document.documentElement.style.cursor=d),document.body.classList.remove("non-selectable"),s===!0){const B=()=>{document.body.classList.remove("no-pointer-events--children")};g!==void 0?setTimeout(()=>{B(),g()},50):B()}else g!==void 0&&g()}};if(t.event.detected===!0){t.event.isFirst!==!0&&l(a,t.event.mouse);const{payload:d,synthetic:g}=we(a,t,!1);d!==void 0&&(t.handler(d)===!1?t.end(a):(t.styleCleanup===void 0&&t.event.isFirst===!0&&o(),t.event.lastX=d.position.left,t.event.lastY=d.position.top,t.event.lastDir=g===!0?void 0:d.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||s===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){o(),t.event.detected=!0,t.move(a);return}const h=Math.abs(f),_=Math.abs(u);h!==_&&(t.direction.horizontal===!0&&h>_||t.direction.vertical===!0&&h<_||t.direction.up===!0&&h<_&&u<0||t.direction.down===!0&&h<_&&u>0||t.direction.left===!0&&h>_&&f<0||t.direction.right===!0&&h>_&&f>0?(t.event.detected=!0,t.move(a)):t.end(a,!0))},end(a,c){if(t.event!==void 0){if(_e(t,"temp"),G.is.firefox===!0&&ye(e,!1),c===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(we(a===void 0?t.lastEvt:a,t).payload);const{payload:f}=we(a===void 0?t.lastEvt:a,t,!0),u=()=>{t.handler(f)};t.styleCleanup!==void 0?t.styleCleanup(u):u()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,r.mouse===!0){const a=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";ie(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}G.has.touch===!0&&ie(t,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const r=e.__qtouchpan;r!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&r.end(),r.handler=n.value),r.direction=Ue(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),_e(n,"main"),_e(n,"temp"),G.is.firefox===!0&&ye(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}});function oe(e,n,r){return r<=n?n:Math.min(r,Math.max(n,e))}const Ie=150;var sa=R({name:"QDrawer",inheritAttrs:!1,props:{...St,...$t,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...xt,"onLayout","miniState"],setup(e,{slots:n,emit:r,attrs:l}){const t=X(),{proxy:{$q:a}}=t,c=kt(e,a),{preventBodyScroll:f}=Ot(),{registerTimeout:u,removeTimeout:s}=zt(),o=I(ue,A);if(o===A)return console.error("QDrawer needs to be child of QLayout"),A;let h,_=null,d;const g=S(e.behavior==="mobile"||e.behavior!=="desktop"&&o.totalWidth.value<=e.breakpoint),B=m(()=>e.mini===!0&&g.value!==!0),k=m(()=>B.value===!0?e.miniWidth:e.width),b=S(e.showIfAbove===!0&&g.value===!1?!0:e.modelValue===!0),v=m(()=>e.persistent!==!0&&(g.value===!0||Ze.value===!0));function z(i,p){if(U(),i!==!1&&o.animate(),D(0),g.value===!0){const L=o.instances[ae.value];L!==void 0&&L.belowBreakpoint===!0&&L.hide(!1),V(1),o.isContainer.value!==!0&&f(!0)}else V(0),i!==!1&&me(!1);u(()=>{i!==!1&&me(!0),p!==!0&&r("show",i)},Ie)}function y(i,p){Y(),i!==!1&&o.animate(),V(0),D(F.value*k.value),he(),p!==!0?u(()=>{r("hide",i)},Ie):s()}const{show:C,hide:O}=Lt({showing:b,hideOnRouteChange:v,handleShow:z,handleHide:y}),{addToHistory:U,removeFromHistory:Y}=Tt(b,O,v),H={belowBreakpoint:g,hide:O},E=m(()=>e.side==="right"),F=m(()=>(a.lang.rtl===!0?-1:1)*(E.value===!0?1:-1)),Be=S(0),W=S(!1),ce=S(!1),De=S(k.value*F.value),ae=m(()=>E.value===!0?"left":"right"),de=m(()=>b.value===!0&&g.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:k.value:0),fe=m(()=>e.overlay===!0||e.miniToOverlay===!0||o.view.value.indexOf(E.value?"R":"L")>-1||a.platform.is.ios===!0&&o.isContainer.value===!0),K=m(()=>e.overlay===!1&&b.value===!0&&g.value===!1),Ze=m(()=>e.overlay===!0&&b.value===!0&&g.value===!1),et=m(()=>"fullscreen q-drawer__backdrop"+(b.value===!1&&W.value===!1?" hidden":"")),tt=m(()=>({backgroundColor:`rgba(0,0,0,${Be.value*.4})`})),Me=m(()=>E.value===!0?o.rows.value.top[2]==="r":o.rows.value.top[0]==="l"),at=m(()=>E.value===!0?o.rows.value.bottom[2]==="r":o.rows.value.bottom[0]==="l"),nt=m(()=>{const i={};return o.header.space===!0&&Me.value===!1&&(fe.value===!0?i.top=`${o.header.offset}px`:o.header.space===!0&&(i.top=`${o.header.size}px`)),o.footer.space===!0&&at.value===!1&&(fe.value===!0?i.bottom=`${o.footer.offset}px`:o.footer.space===!0&&(i.bottom=`${o.footer.size}px`)),i}),rt=m(()=>{const i={width:`${k.value}px`,transform:`translateX(${De.value}px)`};return g.value===!0?i:Object.assign(i,nt.value)}),it=m(()=>"q-drawer__content fit "+(o.isContainer.value!==!0?"scroll":"overflow-auto")),ot=m(()=>`q-drawer q-drawer--${e.side}`+(ce.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(c.value===!0?" q-drawer--dark q-dark":"")+(W.value===!0?" no-transition":b.value===!0?"":" q-layout--prevent-focus")+(g.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${B.value===!0?"mini":"standard"}`+(fe.value===!0||K.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Me.value===!0?" q-drawer--top-padding":""))),lt=m(()=>{const i=a.lang.rtl===!0?e.side:ae.value;return[[Ce,dt,void 0,{[i]:!0,mouse:!0}]]}),st=m(()=>{const i=a.lang.rtl===!0?ae.value:e.side;return[[Ce,Pe,void 0,{[i]:!0,mouse:!0}]]}),ut=m(()=>{const i=a.lang.rtl===!0?ae.value:e.side;return[[Ce,Pe,void 0,{[i]:!0,mouse:!0,mouseAllDir:!0}]]});function ve(){ft(g,e.behavior==="mobile"||e.behavior!=="desktop"&&o.totalWidth.value<=e.breakpoint)}w(g,i=>{i===!0?(h=b.value,b.value===!0&&O(!1)):e.overlay===!1&&e.behavior!=="mobile"&&h!==!1&&(b.value===!0?(D(0),V(0),he()):C(!1))}),w(()=>e.side,(i,p)=>{o.instances[p]===H&&(o.instances[p]=void 0,o[p].space=!1,o[p].offset=0),o.instances[i]=H,o[i].size=k.value,o[i].space=K.value,o[i].offset=de.value}),w(o.totalWidth,()=>{(o.isContainer.value===!0||document.qScrollPrevented!==!0)&&ve()}),w(()=>e.behavior+e.breakpoint,ve),w(o.isContainer,i=>{b.value===!0&&f(i!==!0),i===!0&&ve()}),w(o.scrollbarWidth,()=>{D(b.value===!0?0:void 0)}),w(de,i=>{Q("offset",i)}),w(K,i=>{r("onLayout",i),Q("space",i)}),w(E,()=>{D()}),w(k,i=>{D(),ge(e.miniToOverlay,i)}),w(()=>e.miniToOverlay,i=>{ge(i,k.value)}),w(()=>a.lang.rtl,()=>{D()}),w(()=>e.mini,()=>{e.modelValue===!0&&(ct(),o.animate())}),w(B,i=>{r("miniState",i)});function D(i){i===void 0?le(()=>{i=b.value===!0?0:k.value,D(F.value*i)}):(o.isContainer.value===!0&&E.value===!0&&(g.value===!0||Math.abs(i)===k.value)&&(i+=F.value*o.scrollbarWidth.value),De.value=i)}function V(i){Be.value=i}function me(i){const p=i===!0?"remove":o.isContainer.value!==!0?"add":"";p!==""&&document.body.classList[p]("q-body--drawer-toggle")}function ct(){_!==null&&clearTimeout(_),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),ce.value=!0,_=setTimeout(()=>{_=null,ce.value=!1,t&&t.proxy&&t.proxy.$el&&t.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function dt(i){if(b.value!==!1)return;const p=k.value,L=oe(i.distance.x,0,p);if(i.isFinal===!0){L>=Math.min(75,p)===!0?C():(o.animate(),V(0),D(F.value*p)),W.value=!1;return}D((a.lang.rtl===!0?E.value!==!0:E.value)?Math.max(p-L,0):Math.min(0,L-p)),V(oe(L/p,0,1)),i.isFirst===!0&&(W.value=!0)}function Pe(i){if(b.value!==!0)return;const p=k.value,L=i.direction===e.side,ne=(a.lang.rtl===!0?L!==!0:L)?oe(i.distance.x,0,p):0;if(i.isFinal===!0){Math.abs(ne)<Math.min(75,p)===!0?(o.animate(),V(1),D(0)):O(),W.value=!1;return}D(F.value*ne),V(oe(1-ne/p,0,1)),i.isFirst===!0&&(W.value=!0)}function he(){f(!1),me(!0)}function Q(i,p){o.update(e.side,i,p)}function ft(i,p){i.value!==p&&(i.value=p)}function ge(i,p){Q("size",i===!0?e.miniWidth:p)}return o.instances[e.side]=H,ge(e.miniToOverlay,k.value),Q("space",K.value),Q("offset",de.value),e.showIfAbove===!0&&e.modelValue!==!0&&b.value===!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",!0),j(()=>{r("onLayout",K.value),r("miniState",B.value),h=e.showIfAbove===!0;const i=()=>{(b.value===!0?z:y)(!1,!0)};if(o.totalWidth.value!==0){le(i);return}d=w(o.totalWidth,()=>{d(),d=void 0,b.value===!1&&e.showIfAbove===!0&&g.value===!1?C(!1):i()})}),ee(()=>{d!==void 0&&d(),_!==null&&(clearTimeout(_),_=null),b.value===!0&&he(),o.instances[e.side]===H&&(o.instances[e.side]=void 0,Q("size",0),Q("offset",0),Q("space",!1))}),()=>{const i=[];g.value===!0&&(e.noSwipeOpen===!1&&i.push($e(x("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),lt.value)),i.push(Ae("div",{ref:"backdrop",class:et.value,style:tt.value,"aria-hidden":"true",onClick:O},void 0,"backdrop",e.noSwipeBackdrop!==!0&&b.value===!0,()=>ut.value)));const p=B.value===!0&&n.mini!==void 0,L=[x("div",{...l,key:""+p,class:[it.value,l.class]},p===!0?n.mini():ke(n.default))];return e.elevated===!0&&b.value===!0&&L.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(Ae("aside",{ref:"content",class:ot.value,style:rt.value},L,"contentclose",e.noSwipeClose!==!0&&g.value===!0,()=>st.value)),x("div",{class:"q-drawer-container"},i)}}});const ua={class:"text-h5 text-center"},Re={__name:"MainDrawer",props:{side:String,title:String},setup(e){return(n,r)=>(T(),M(sa,{side:e.side,"show-if-above":"",bordered:""},{default:$(()=>[P("div",ua,Z(e.title),1),Bt(n.$slots,"list",{},()=>[We("\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0443\u0441\u0442")])]),_:3},8,["side"]))}},ca=te`
  subscription getUsers {
    users {
      id
      first_name
      email
      avatar_url
    }
  }
`;te`
  subscription getAllChatsForCurrentUser($user_id: String!) {
    chats(
      where: {
        _or: [
          { consumer_id: { _eq: $user_id } }
          { sender_id: { _eq: $user_id } }
        ]
      }
    ) {
      sender_id
      consumer_id
      id
      consumer_firstName
      consumer_avatar
      sender_firstName
      sender_avatar
    }
  }
`;te`
  subscription getAllChatsSenderForCurrentUser($user_id: String!) {
    chats(where: { consumer_id: { _eq: $user_id } }) {
      sender_id
      consumer_id
      id
      consumer_firstName
      consumer_avatar
      sender_firstName
      sender_avatar
    }
  }
`;const da=te`
  subscription getLastMessageInTheChat($chat_id: Int) {
    chats(where: { id: { _eq: $chat_id } }) {
      messages(order_by: { created_at: desc }, limit: 1) {
        id
        senderId
        senderDisplayName
        senderAvatarUrl
        created_at
        content
        consumerId
        chat_id
      }
    }
  }
`;te`
  subscription getSavedMessagesInThisChat($chat_id: Int) {
    chats(where: { id: { _eq: $chat_id } }) {
      messages {
        id
        senderId
        senderDisplayName
        senderAvatarUrl
        created_at
        content
        consumerId
      }
    }
  }
`;const fa={class:"q-ml-md"},va={class:"q-ml-md text-grey"},ma={key:0},ha={__name:"ChatItem",props:{currentChat:Object},setup(e){const{currentChat:n}=e,r=m(()=>I("user")),l=I("selectChat"),{result:t}=je(da,{chat_id:n.id}),a=m(()=>{var u,s;return(s=(u=t.value)==null?void 0:u.chats[0])==null?void 0:s.messages[0]}),c=()=>{var u;return n.sender_id===((u=r.value.value)==null?void 0:u.id)?n.consumer_avatar:n.sender_avatar},f=()=>{var u;return n.sender_id===((u=r.value.value)==null?void 0:u.id)?n.consumer_firstName:n.sender_firstName};return w(r,u=>{console.log("hi")}),(u,s)=>(T(),M(Te,{clickable:"",class:"flex items-center",onClick:s[0]||(s[0]=o=>N(l)(e.currentChat))},{default:$(()=>{var o,h;return[q(Ke,{class:"avatar-min-size",src:c()},null,8,["src"]),P("div",fa,Z(f()),1),P("div",va,[N(a)?(T(),Le("span",ma,Z((o=N(a))==null?void 0:o.senderDisplayName)+": "+Z((h=N(a))==null?void 0:h.content),1)):Dt("",!0)])]}),_:1}))}},ga={__name:"ChatsList",props:{chatsList:{type:Array,default:()=>[]}},setup(e){return(n,r)=>(T(),M(Ge,null,{default:$(()=>[(T(!0),Le(Xe,null,Ye(e.chatsList,l=>(T(),M(ha,{key:l.id,currentChat:l},null,8,["currentChat"]))),128))]),_:1}))}};function pa(){return I(Mt)}const ya={class:"avatar-min-size"},ba={class:"q-ml-md"},_a=P("span",{class:"q-ml-sm"},"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043D\u0430\u0447\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0447\u0430\u0442 \u0441 \u0434\u0430\u043D\u043D\u044B\u043C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C?",-1),wa={__name:"UserItem",props:{currentUser:Object},setup(e){const{currentUser:n}=e,r=pa(),l=S(!1),{mutate:t}=Pt(Et),a=async()=>{var f;const c=(f=window.Clerk)==null?void 0:f.user;if(n.id===c.id){r.notify({type:"warning",position:"top",message:"\u041D\u0435\u043B\u044C\u0437\u044F \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0447\u0430\u0442 \u0441 \u0441\u0430\u043C\u0438\u043C \u0441\u043E\u0431\u043E\u0439!"});return}console.log("cur",n),console.log("us",c);try{const{data:u}=await t({sender_id:c.id,consumer_id:n.id,sender_avatar:c.profileImageUrl,sender_firstName:c.firstName,consumer_avatar:n.avatar_url,consumer_firstName:n.first_name});console.log(u)}catch(u){console.log(u)}};return(c,f)=>(T(),M(Te,{class:"flex items-center justify-between",clickable:"",onClick:f[1]||(f[1]=u=>l.value=!0)},{default:$(()=>[P("div",ya,[q(Ke,{src:e.currentUser.avatar_url},null,8,["src"])]),P("div",null,[P("div",ba,Z(e.currentUser.first_name),1)]),q(At,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=u=>l.value=u),persistent:""},{default:$(()=>[q(Vt,null,{default:$(()=>[q(Qt,{class:"row items-center"},{default:$(()=>[_a]),_:1}),q(Nt,{align:"right"},{default:$(()=>[$e(q(se,{flat:"",label:"\u041D\u0435\u0442",color:"primary"},null,512),[[Ve]]),$e(q(se,{flat:"",label:"\u0414\u0430",color:"primary",onClick:a},null,512),[[Ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ca={__name:"UsersList",props:{usersList:{type:Array,default:()=>[]}},setup(e){return(n,r)=>(T(),M(Ge,null,{default:$(()=>[(T(!0),Le(Xe,null,Ye(e.usersList,l=>(T(),M(wa,{key:l.id,currentUser:l},null,8,["currentUser"]))),128))]),_:1}))}},xa={__name:"MainLayout",setup(e){Wt(jt);const n=S(null),{result:r}=je(ca),{result:l,refetch:t}=Ut(Yt,{user_id:n==null?void 0:n.id});w(n,o=>{t({user_id:o.id})});const a=Ft(),c=S(!1),f=S(!1);j(()=>{const o=setInterval(()=>{var h;n.value=(h=window.Clerk)==null?void 0:h.user,n.value&&clearInterval(o)},500)});const u=()=>{c.value=!c.value},s=o=>{a.commit("chat/CHANGE_CHAT",o)};return J("user",n),J("selectChat",s),J("toggleLeftDrawer",u),(o,h)=>{const _=Ht("router-view");return T(),M(ea,{view:"hHh Lpr lFf"},{default:$(()=>[q(ra),q(Re,{side:"left",title:"\u0421\u043F\u0438\u0441\u043E\u043A \u0447\u0430\u0442\u043E\u0432",modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=d=>c.value=d)},{list:$(()=>{var d;return[q(ga,{"chats-list":(d=N(l))==null?void 0:d.chats,class:"q-mt-md"},null,8,["chats-list"])]}),_:1},8,["modelValue"]),q(Re,{side:"right",title:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439",modelValue:f.value,"onUpdate:modelValue":h[1]||(h[1]=d=>f.value=d)},{list:$(()=>{var d;return[q(Ca,{"users-list":(d=N(r))==null?void 0:d.users,class:"q-mt-md"},null,8,["users-list"])]}),_:1},8,["modelValue"]),q(Kt,null,{default:$(()=>[q(_,null,{default:$(({Component:d})=>[(T(),M(It,null,[(T(),M(Rt(d)))],1024))]),_:1})]),_:1})]),_:1})}}};export{xa as default};
