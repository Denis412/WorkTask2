import{c as I,e as V,p as j,a as vt,d as h,h as $,f as ke,i as H,l as ue,g as K,w,o as Y,j as te,n as ze,k as mt,m as qe,q as ht,r as gt,s as x,t as Fe,u as se,v as pe,x as ie,y as pt,z as yt,A as bt,B as T,C as P,D as S,E as C,Q as ee,F as B,G as E,H as We,P as _t,I as wt,J as Z,K as Ct,L as le,M as ye,N as Ee,O as be,R as xe,S as _e,T as qt,U as xt,V as St,W as $t,X as kt,Y as zt,Z as Lt,_ as Tt,$ as Se,a0 as Ae,a1 as Dt,a2 as X,a3 as Mt,a4 as ae,a5 as je,a6 as Le,a7 as Ot,a8 as Xe,a9 as Ye,aa as Bt,ab as Pt,ac as Et,ad as At,ae as Vt,af as Qt,ag as Ve,ah as Nt,ai as Rt,aj as Ut,ak as Ht,al as It,am as Ft,an as Wt}from"./index.b4acd880.js";import{Q as Te,u as jt,a as Ke,c as Xt,b as Ge,d as Yt,g as Kt}from"./query.68f26389.js";var Gt=I({name:"QPageContainer",setup(e,{slots:n}){const{proxy:{$q:r}}=K(),l=H(ue,V);if(l===V)return console.error("QPageContainer needs to be child of QLayout"),V;j(vt,!0);const t=h(()=>{const a={};return l.header.space===!0&&(a.paddingTop=`${l.header.size}px`),l.right.space===!0&&(a[`padding${r.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(a.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(a[`padding${r.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),a});return()=>$("div",{class:"q-page-container",style:t.value},ke(n.default))}});const{passive:Qe}=qe,Jt=["both","horizontal","vertical"];var Zt=I({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Jt.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:n}){const r={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,t,a;w(()=>e.scrollTarget,()=>{c(),d()});function u(){l!==null&&l();const p=Math.max(0,ht(t)),g=gt(t),m={top:p-r.position.top,left:g-r.position.left};if(e.axis==="vertical"&&m.top===0||e.axis==="horizontal"&&m.left===0)return;const f=Math.abs(m.top)>=Math.abs(m.left)?m.top<0?"up":"down":m.left<0?"left":"right";r.position={top:p,left:g},r.directionChanged=r.direction!==f,r.delta=m,r.directionChanged===!0&&(r.direction=f,r.inflectionPoint=r.position),n("scroll",{...r})}function d(){t=mt(a,e.scrollTarget),t.addEventListener("scroll",o,Qe),o(!0)}function c(){t!==void 0&&(t.removeEventListener("scroll",o,Qe),t=void 0)}function o(p){if(p===!0||e.debounce===0||e.debounce==="0")u();else if(l===null){const[g,m]=e.debounce?[setTimeout(u,e.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];l=()=>{m(g),l=null}}}const{proxy:s}=K();return w(()=>s.$q.lang.rtl,u),Y(()=>{a=s.$el.parentNode,d()}),te(()=>{l!==null&&l(),c()}),Object.assign(s,{trigger:o,getPosition:()=>r}),ze}});function ea(){const e=x(!Fe.value);return e.value===!1&&Y(()=>{e.value=!0}),e}const Je=typeof ResizeObserver!="undefined",Ne=Je===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var $e=I({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:n}){let r=null,l,t={width:-1,height:-1};function a(c){c===!0||e.debounce===0||e.debounce==="0"?u():r===null&&(r=setTimeout(u,e.debounce))}function u(){if(r!==null&&(clearTimeout(r),r=null),l){const{offsetWidth:c,offsetHeight:o}=l;(c!==t.width||o!==t.height)&&(t={width:c,height:o},n("resize",t))}}const{proxy:d}=K();if(Je===!0){let c;const o=s=>{l=d.$el.parentNode,l?(c=new ResizeObserver(a),c.observe(l),u()):s!==!0&&se(()=>{o(!0)})};return Y(()=>{o()}),te(()=>{r!==null&&clearTimeout(r),c!==void 0&&(c.disconnect!==void 0?c.disconnect():l&&c.unobserve(l))}),ze}else{let s=function(){r!==null&&(clearTimeout(r),r=null),o!==void 0&&(o.removeEventListener!==void 0&&o.removeEventListener("resize",a,qe.passive),o=void 0)},p=function(){s(),l&&l.contentDocument&&(o=l.contentDocument.defaultView,o.addEventListener("resize",a,qe.passive),u())};const c=ea();let o;return Y(()=>{se(()=>{l=d.$el,l&&p()})}),te(s),d.trigger=a,()=>{if(c.value===!0)return $("object",{style:Ne.style,tabindex:-1,type:"text/html",data:Ne.url,"aria-hidden":"true",onLoad:p})}}}}),ta=I({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:n,emit:r}){const{proxy:{$q:l}}=K(),t=x(null),a=x(l.screen.height),u=x(e.container===!0?0:l.screen.width),d=x({position:0,direction:"down",inflectionPoint:0}),c=x(0),o=x(Fe.value===!0?0:pe()),s=h(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),p=h(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),g=h(()=>o.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${o.value}px`}:null),m=h(()=>o.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${o.value}px`,width:`calc(100% + ${o.value}px)`}:null);function f(b){if(e.container===!0||document.qScrollPrevented!==!0){const q={position:b.position.top,direction:b.direction,directionChanged:b.directionChanged,inflectionPoint:b.inflectionPoint.top,delta:b.delta.top};d.value=q,e.onScroll!==void 0&&r("scroll",q)}}function M(b){const{height:q,width:D}=b;let R=!1;a.value!==q&&(R=!0,a.value=q,e.onScrollHeight!==void 0&&r("scrollHeight",q),_()),u.value!==D&&(R=!0,u.value=D),R===!0&&e.onResize!==void 0&&r("resize",b)}function k({height:b}){c.value!==b&&(c.value=b,_())}function _(){if(e.container===!0){const b=a.value>c.value?pe():0;o.value!==b&&(o.value=b)}}let v=null;const z={instances:{},view:h(()=>e.view),isContainer:h(()=>e.container),rootRef:t,height:a,containerHeight:c,scrollbarWidth:o,totalWidth:h(()=>u.value+o.value),rows:h(()=>{const b=e.view.toLowerCase().split(" ");return{top:b[0].split(""),middle:b[1].split(""),bottom:b[2].split("")}}),header:ie({size:0,offset:0,space:!1}),right:ie({size:300,offset:0,space:!1}),footer:ie({size:0,offset:0,space:!1}),left:ie({size:300,offset:0,space:!1}),scroll:d,animate(){v!==null?clearTimeout(v):document.body.classList.add("q-body--layout-animate"),v=setTimeout(()=>{v=null,document.body.classList.remove("q-body--layout-animate")},155)},update(b,q,D){z[b][q]=D}};if(j(ue,z),pe()>0){let D=function(){b=null,q.classList.remove("hide-scrollbar")},R=function(){if(b===null){if(q.scrollHeight>l.screen.height)return;q.classList.add("hide-scrollbar")}else clearTimeout(b);b=setTimeout(D,300)},G=function(U){b!==null&&U==="remove"&&(clearTimeout(b),D()),window[`${U}EventListener`]("resize",R)},b=null;const q=document.body;w(()=>e.container!==!0?"add":"remove",G),e.container!==!0&&G("add"),pt(()=>{G("remove")})}return()=>{const b=yt(n.default,[$(Zt,{onScroll:f}),$($e,{onResize:M})]),q=$("div",{class:s.value,style:p.value,ref:e.container===!0?void 0:t,tabindex:-1},b);return e.container===!0?$("div",{class:"q-layout-container overflow-hidden",ref:t},[$($e,{onResize:k}),$("div",{class:"absolute-full",style:g.value},[$("div",{class:"scroll",style:m.value},[q])])]):q}}}),aa=I({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:n}){const r=h(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>$("div",{class:r.value,role:"toolbar"},ke(n.default))}}),na=I({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:r}){const{proxy:{$q:l}}=K(),t=H(ue,V);if(t===V)return console.error("QHeader needs to be child of QLayout"),V;const a=x(parseInt(e.heightHint,10)),u=x(!0),d=h(()=>e.reveal===!0||t.view.value.indexOf("H")>-1||l.platform.is.ios&&t.isContainer.value===!0),c=h(()=>{if(e.modelValue!==!0)return 0;if(d.value===!0)return u.value===!0?a.value:0;const v=a.value-t.scroll.value.position;return v>0?v:0}),o=h(()=>e.modelValue!==!0||d.value===!0&&u.value!==!0),s=h(()=>e.modelValue===!0&&o.value===!0&&e.reveal===!0),p=h(()=>"q-header q-layout__section--marginal "+(d.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(o.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),g=h(()=>{const v=t.rows.value.top,z={};return v[0]==="l"&&t.left.space===!0&&(z[l.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),v[2]==="r"&&t.right.space===!0&&(z[l.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),z});function m(v,z){t.update("header",v,z)}function f(v,z){v.value!==z&&(v.value=z)}function M({height:v}){f(a,v),m("size",v)}function k(v){s.value===!0&&f(u,!0),r("focusin",v)}w(()=>e.modelValue,v=>{m("space",v),f(u,!0),t.animate()}),w(c,v=>{m("offset",v)}),w(()=>e.reveal,v=>{v===!1&&f(u,e.modelValue)}),w(u,v=>{t.animate(),r("reveal",v)}),w(t.scroll,v=>{e.reveal===!0&&f(u,v.direction==="up"||v.position<=e.revealOffset||v.position-v.inflectionPoint<100)});const _={};return t.instances.header=_,e.modelValue===!0&&m("size",a.value),m("space",e.modelValue),m("offset",c.value),te(()=>{t.instances.header===_&&(t.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const v=bt(n.default,[]);return e.elevated===!0&&v.push($("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),v.push($($e,{debounce:0,onResize:M})),$("header",{class:p.value,style:g.value,onFocusin:k},v)}}});const ra={class:"flex items-center"},ia=E("div",{class:"q-ml-md"},[E("div",{id:"user-button"})],-1),la={__name:"MainHeader",setup(e){const n=H("toggleLeftDrawer"),r=H("toggleRightDrawer");return(l,t)=>(T(),P(na,null,{default:S(()=>[C(aa,{class:"items-center justify-between"},{default:S(()=>[C(ee,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:B(n)},null,8,["onClick"]),E("div",ra,[C(Te,{id:"auth-links"},{default:S(()=>[C(ee,{onClick:B(jt).login},{default:S(()=>[We(" \u0412\u043E\u0439\u0442\u0438 ")]),_:1},8,["onClick"])]),_:1}),ia,C(ee,{class:"burger_btn",flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:B(r)},null,8,["onClick"])])]),_:1})]),_:1}))}},De={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},oa=Object.keys(De);De.all=!0;function Re(e){const n={};for(const r of oa)e[r]===!0&&(n[r]=!0);return Object.keys(n).length===0?De:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function Ue(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function sa(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),_t.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function we(e,n,r){const l=xe(e);let t,a=l.left-n.event.x,u=l.top-n.event.y,d=Math.abs(a),c=Math.abs(u);const o=n.direction;o.horizontal===!0&&o.vertical!==!0?t=a<0?"left":"right":o.horizontal!==!0&&o.vertical===!0?t=u<0?"up":"down":o.up===!0&&u<0?(t="up",d>c&&(o.left===!0&&a<0?t="left":o.right===!0&&a>0&&(t="right"))):o.down===!0&&u>0?(t="down",d>c&&(o.left===!0&&a<0?t="left":o.right===!0&&a>0&&(t="right"))):o.left===!0&&a<0?(t="left",d<c&&(o.up===!0&&u<0?t="up":o.down===!0&&u>0&&(t="down"))):o.right===!0&&a>0&&(t="right",d<c&&(o.up===!0&&u<0?t="up":o.down===!0&&u>0&&(t="down")));let s=!1;if(t===void 0&&r===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};t=n.event.lastDir,s=!0,t==="left"||t==="right"?(l.left-=a,d=0,a=0):(l.top-=u,c=0,u=0)}return{synthetic:s,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:l,direction:t,isFirst:n.event.isFirst,isFinal:r===!0,duration:Date.now()-n.event.time,distance:{x:d,y:c},offset:{x:a,y:u},delta:{x:l.left-n.event.lastX,y:l.top-n.event.lastY}}}}let ua=0;var Ce=wt({name:"touch-pan",beforeMount(e,{value:n,modifiers:r}){if(r.mouse!==!0&&Z.has.touch!==!0)return;function l(a,u){r.mouse===!0&&u===!0?qt(a):(r.stop===!0&&be(a),r.prevent===!0&&Ee(a))}const t={uid:"qvtp_"+ua++,handler:n,modifiers:r,direction:Re(r),noop:ze,mouseStart(a){Ue(a,t)&&Ct(a)&&(le(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(a,!0))},touchStart(a){if(Ue(a,t)){const u=a.target;le(t,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","passiveCapture"],[u,"touchend","end","passiveCapture"]]),t.start(a)}},start(a,u){if(Z.is.firefox===!0&&ye(e,!0),t.lastEvt=a,u===!0||r.stop===!0){if(t.direction.all!==!0&&(u!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const o=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Ee(o),a.cancelBubble===!0&&be(o),Object.assign(o,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[t.uid]:a.qClonedBy.concat(t.uid)}),t.initialEvent={target:a.target,event:o}}be(a)}const{left:d,top:c}=xe(a);t.event={x:d,y:c,time:Date.now(),mouse:u===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:c}},move(a){if(t.event===void 0)return;const u=xe(a),d=u.left-t.event.x,c=u.top-t.event.y;if(d===0&&c===0)return;t.lastEvt=a;const o=t.event.mouse===!0,s=()=>{l(a,o);let m;r.preserveCursor!==!0&&r.preservecursor!==!0&&(m=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),o===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),sa(),t.styleCleanup=f=>{if(t.styleCleanup=void 0,m!==void 0&&(document.documentElement.style.cursor=m),document.body.classList.remove("non-selectable"),o===!0){const M=()=>{document.body.classList.remove("no-pointer-events--children")};f!==void 0?setTimeout(()=>{M(),f()},50):M()}else f!==void 0&&f()}};if(t.event.detected===!0){t.event.isFirst!==!0&&l(a,t.event.mouse);const{payload:m,synthetic:f}=we(a,t,!1);m!==void 0&&(t.handler(m)===!1?t.end(a):(t.styleCleanup===void 0&&t.event.isFirst===!0&&s(),t.event.lastX=m.position.left,t.event.lastY=m.position.top,t.event.lastDir=f===!0?void 0:m.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||o===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){s(),t.event.detected=!0,t.move(a);return}const p=Math.abs(d),g=Math.abs(c);p!==g&&(t.direction.horizontal===!0&&p>g||t.direction.vertical===!0&&p<g||t.direction.up===!0&&p<g&&c<0||t.direction.down===!0&&p<g&&c>0||t.direction.left===!0&&p>g&&d<0||t.direction.right===!0&&p>g&&d>0?(t.event.detected=!0,t.move(a)):t.end(a,!0))},end(a,u){if(t.event!==void 0){if(_e(t,"temp"),Z.is.firefox===!0&&ye(e,!1),u===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(we(a===void 0?t.lastEvt:a,t).payload);const{payload:d}=we(a===void 0?t.lastEvt:a,t,!0),c=()=>{t.handler(d)};t.styleCleanup!==void 0?t.styleCleanup(c):c()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,r.mouse===!0){const a=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";le(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}Z.has.touch===!0&&le(t,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const r=e.__qtouchpan;r!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&r.end(),r.handler=n.value),r.direction=Re(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),_e(n,"main"),_e(n,"temp"),Z.is.firefox===!0&&ye(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}});function oe(e,n,r){return r<=n?n:Math.min(r,Math.max(n,e))}const He=150;var ca=I({name:"QDrawer",inheritAttrs:!1,props:{...xt,...St,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...$t,"onLayout","miniState"],setup(e,{slots:n,emit:r,attrs:l}){const t=K(),{proxy:{$q:a}}=t,u=kt(e,a),{preventBodyScroll:d}=Dt(),{registerTimeout:c,removeTimeout:o}=zt(),s=H(ue,V);if(s===V)return console.error("QDrawer needs to be child of QLayout"),V;let p,g=null,m;const f=x(e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint),M=h(()=>e.mini===!0&&f.value!==!0),k=h(()=>M.value===!0?e.miniWidth:e.width),_=x(e.showIfAbove===!0&&f.value===!1?!0:e.modelValue===!0),v=h(()=>e.persistent!==!0&&(f.value===!0||Ze.value===!0));function z(i,y){if(R(),i!==!1&&s.animate(),O(0),f.value===!0){const L=s.instances[ne.value];L!==void 0&&L.belowBreakpoint===!0&&L.hide(!1),Q(1),s.isContainer.value!==!0&&d(!0)}else Q(0),i!==!1&&me(!1);c(()=>{i!==!1&&me(!0),y!==!0&&r("show",i)},He)}function b(i,y){G(),i!==!1&&s.animate(),Q(0),O(F.value*k.value),he(),y!==!0?c(()=>{r("hide",i)},He):o()}const{show:q,hide:D}=Lt({showing:_,hideOnRouteChange:v,handleShow:z,handleHide:b}),{addToHistory:R,removeFromHistory:G}=Tt(_,D,v),U={belowBreakpoint:f,hide:D},A=h(()=>e.side==="right"),F=h(()=>(a.lang.rtl===!0?-1:1)*(A.value===!0?1:-1)),Me=x(0),W=x(!1),ce=x(!1),Oe=x(k.value*F.value),ne=h(()=>A.value===!0?"left":"right"),de=h(()=>_.value===!0&&f.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:k.value:0),fe=h(()=>e.overlay===!0||e.miniToOverlay===!0||s.view.value.indexOf(A.value?"R":"L")>-1||a.platform.is.ios===!0&&s.isContainer.value===!0),J=h(()=>e.overlay===!1&&_.value===!0&&f.value===!1),Ze=h(()=>e.overlay===!0&&_.value===!0&&f.value===!1),et=h(()=>"fullscreen q-drawer__backdrop"+(_.value===!1&&W.value===!1?" hidden":"")),tt=h(()=>({backgroundColor:`rgba(0,0,0,${Me.value*.4})`})),Be=h(()=>A.value===!0?s.rows.value.top[2]==="r":s.rows.value.top[0]==="l"),at=h(()=>A.value===!0?s.rows.value.bottom[2]==="r":s.rows.value.bottom[0]==="l"),nt=h(()=>{const i={};return s.header.space===!0&&Be.value===!1&&(fe.value===!0?i.top=`${s.header.offset}px`:s.header.space===!0&&(i.top=`${s.header.size}px`)),s.footer.space===!0&&at.value===!1&&(fe.value===!0?i.bottom=`${s.footer.offset}px`:s.footer.space===!0&&(i.bottom=`${s.footer.size}px`)),i}),rt=h(()=>{const i={width:`${k.value}px`,transform:`translateX(${Oe.value}px)`};return f.value===!0?i:Object.assign(i,nt.value)}),it=h(()=>"q-drawer__content fit "+(s.isContainer.value!==!0?"scroll":"overflow-auto")),lt=h(()=>`q-drawer q-drawer--${e.side}`+(ce.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(u.value===!0?" q-drawer--dark q-dark":"")+(W.value===!0?" no-transition":_.value===!0?"":" q-layout--prevent-focus")+(f.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${M.value===!0?"mini":"standard"}`+(fe.value===!0||J.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Be.value===!0?" q-drawer--top-padding":""))),ot=h(()=>{const i=a.lang.rtl===!0?e.side:ne.value;return[[Ce,dt,void 0,{[i]:!0,mouse:!0}]]}),st=h(()=>{const i=a.lang.rtl===!0?ne.value:e.side;return[[Ce,Pe,void 0,{[i]:!0,mouse:!0}]]}),ut=h(()=>{const i=a.lang.rtl===!0?ne.value:e.side;return[[Ce,Pe,void 0,{[i]:!0,mouse:!0,mouseAllDir:!0}]]});function ve(){ft(f,e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint)}w(f,i=>{i===!0?(p=_.value,_.value===!0&&D(!1)):e.overlay===!1&&e.behavior!=="mobile"&&p!==!1&&(_.value===!0?(O(0),Q(0),he()):q(!1))}),w(()=>e.side,(i,y)=>{s.instances[y]===U&&(s.instances[y]=void 0,s[y].space=!1,s[y].offset=0),s.instances[i]=U,s[i].size=k.value,s[i].space=J.value,s[i].offset=de.value}),w(s.totalWidth,()=>{(s.isContainer.value===!0||document.qScrollPrevented!==!0)&&ve()}),w(()=>e.behavior+e.breakpoint,ve),w(s.isContainer,i=>{_.value===!0&&d(i!==!0),i===!0&&ve()}),w(s.scrollbarWidth,()=>{O(_.value===!0?0:void 0)}),w(de,i=>{N("offset",i)}),w(J,i=>{r("onLayout",i),N("space",i)}),w(A,()=>{O()}),w(k,i=>{O(),ge(e.miniToOverlay,i)}),w(()=>e.miniToOverlay,i=>{ge(i,k.value)}),w(()=>a.lang.rtl,()=>{O()}),w(()=>e.mini,()=>{e.modelValue===!0&&(ct(),s.animate())}),w(M,i=>{r("miniState",i)});function O(i){i===void 0?se(()=>{i=_.value===!0?0:k.value,O(F.value*i)}):(s.isContainer.value===!0&&A.value===!0&&(f.value===!0||Math.abs(i)===k.value)&&(i+=F.value*s.scrollbarWidth.value),Oe.value=i)}function Q(i){Me.value=i}function me(i){const y=i===!0?"remove":s.isContainer.value!==!0?"add":"";y!==""&&document.body.classList[y]("q-body--drawer-toggle")}function ct(){g!==null&&clearTimeout(g),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),ce.value=!0,g=setTimeout(()=>{g=null,ce.value=!1,t&&t.proxy&&t.proxy.$el&&t.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function dt(i){if(_.value!==!1)return;const y=k.value,L=oe(i.distance.x,0,y);if(i.isFinal===!0){L>=Math.min(75,y)===!0?q():(s.animate(),Q(0),O(F.value*y)),W.value=!1;return}O((a.lang.rtl===!0?A.value!==!0:A.value)?Math.max(y-L,0):Math.min(0,L-y)),Q(oe(L/y,0,1)),i.isFirst===!0&&(W.value=!0)}function Pe(i){if(_.value!==!0)return;const y=k.value,L=i.direction===e.side,re=(a.lang.rtl===!0?L!==!0:L)?oe(i.distance.x,0,y):0;if(i.isFinal===!0){Math.abs(re)<Math.min(75,y)===!0?(s.animate(),Q(1),O(0)):D(),W.value=!1;return}O(F.value*re),Q(oe(1-re/y,0,1)),i.isFirst===!0&&(W.value=!0)}function he(){d(!1),me(!0)}function N(i,y){s.update(e.side,i,y)}function ft(i,y){i.value!==y&&(i.value=y)}function ge(i,y){N("size",i===!0?e.miniWidth:y)}return s.instances[e.side]=U,ge(e.miniToOverlay,k.value),N("space",J.value),N("offset",de.value),e.showIfAbove===!0&&e.modelValue!==!0&&_.value===!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",!0),Y(()=>{r("onLayout",J.value),r("miniState",M.value),p=e.showIfAbove===!0;const i=()=>{(_.value===!0?z:b)(!1,!0)};if(s.totalWidth.value!==0){se(i);return}m=w(s.totalWidth,()=>{m(),m=void 0,_.value===!1&&e.showIfAbove===!0&&f.value===!1?q(!1):i()})}),te(()=>{m!==void 0&&m(),g!==null&&(clearTimeout(g),g=null),_.value===!0&&he(),s.instances[e.side]===U&&(s.instances[e.side]=void 0,N("size",0),N("offset",0),N("space",!1))}),()=>{const i=[];f.value===!0&&(e.noSwipeOpen===!1&&i.push(Se($("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),ot.value)),i.push(Ae("div",{ref:"backdrop",class:et.value,style:tt.value,"aria-hidden":"true",onClick:D},void 0,"backdrop",e.noSwipeBackdrop!==!0&&_.value===!0,()=>ut.value)));const y=M.value===!0&&n.mini!==void 0,L=[$("div",{...l,key:""+y,class:[it.value,l.class]},y===!0?n.mini():ke(n.default))];return e.elevated===!0&&_.value===!0&&L.push($("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(Ae("aside",{ref:"content",class:lt.value,style:rt.value},L,"contentclose",e.noSwipeClose!==!0&&f.value===!0,()=>st.value)),$("div",{class:"q-drawer-container"},i)}}});const da={class:"text-h5 text-center"},Ie={__name:"MainDrawer",props:{side:String,title:String},setup(e){return(n,r)=>(T(),P(ca,{side:e.side,"show-if-above":"",bordered:""},{default:S(()=>[E("div",da,X(e.title),1),Mt(n.$slots,"list",{},()=>[We("\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0443\u0441\u0442")])]),_:3},8,["side"]))}},fa=ae`
  subscription getUsers {
    users {
      id
      first_name
      email
      avatar_url
    }
  }
`;ae`
  subscription getAllChatsForCurrentUser($user_id: String!) {
    chats(
      where: {
        _or: [
          { consumer_id: { _eq: $user_id } }
          { sender_id: { _eq: $user_id } }
        ]
      }
    ) {
      sender_id
      consumer_id
      id
      consumer_firstName
      consumer_avatar
      sender_firstName
      sender_avatar
    }
  }
`;ae`
  subscription getAllChatsSenderForCurrentUser($user_id: String!) {
    chats(where: { consumer_id: { _eq: $user_id } }) {
      sender_id
      consumer_id
      id
      consumer_firstName
      consumer_avatar
      sender_firstName
      sender_avatar
    }
  }
`;const va=ae`
  subscription getLastMessageInTheChat($chat_id: Int) {
    chats(where: { id: { _eq: $chat_id } }) {
      messages(order_by: { created_at: desc }, limit: 1) {
        id
        senderId
        senderDisplayName
        senderAvatarUrl
        created_at
        content
        consumerId
        chat_id
      }
    }
  }
`;ae`
  subscription getSavedMessagesInThisChat($chat_id: Int) {
    chats(where: { id: { _eq: $chat_id } }) {
      messages {
        id
        senderId
        senderDisplayName
        senderAvatarUrl
        created_at
        content
        consumerId
      }
    }
  }
`;const ma={class:"flex items-center"},ha={class:"flex justify-center"},ga={class:"q-ml-sm text-center"},pa={key:0,class:"q-ml-md text-grey",style:{"max-width":"max-content","overflow-x":"auto"}},ya={__name:"ChatItem",props:{currentChat:Object},setup(e){const{currentChat:n}=e,r=h(()=>H("user")),l=H("selectChat"),{result:t}=je(va,{chat_id:n.id}),a=h(()=>{var c,o;return(o=(c=t.value)==null?void 0:c.chats[0])==null?void 0:o.messages[0]}),u=()=>{var c;return n.sender_id===((c=r.value.value)==null?void 0:c.id)?n.consumer_avatar:n.sender_avatar},d=()=>{var c;return n.sender_id===((c=r.value.value)==null?void 0:c.id)?n.consumer_firstName:n.sender_firstName};return w(r,c=>{console.log("hi")}),(c,o)=>(T(),P(Te,{clickable:"",class:"flex items-center flex-wrap",onClick:o[0]||(o[0]=s=>B(l)(e.currentChat))},{default:S(()=>{var s,p,g;return[E("div",ma,[E("div",ha,[C(Ke,{class:"avatar-min-size",src:u()},null,8,["src"])]),E("div",ga,X(d()),1)]),B(a)?(T(),Le("div",pa,X((s=B(a))==null?void 0:s.senderDisplayName)+": "+X((p=B(a))==null?void 0:p.content)+", "+X(B(Xt)((g=B(a))==null?void 0:g.created_at)),1)):Ot("",!0)]}),_:1}))}},ba={__name:"ChatsList",props:{chatsList:{type:Array,default:()=>[]}},setup(e){return(n,r)=>(T(),P(Ge,null,{default:S(()=>[(T(!0),Le(Xe,null,Ye(e.chatsList,l=>(T(),P(ya,{key:l.id,currentChat:l},null,8,["currentChat"]))),128))]),_:1}))}},_a={class:"avatar-min-size"},wa={class:"q-ml-md"},Ca=E("span",{class:"q-ml-sm"},"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043D\u0430\u0447\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0447\u0430\u0442 \u0441 \u0434\u0430\u043D\u043D\u044B\u043C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C?",-1),qa={__name:"UserItem",props:{currentUser:Object},setup(e){const{currentUser:n}=e,r=Yt(),l=x(!1),{mutate:t}=Bt(Pt),a=async()=>{var d,c;if(!((d=window.Clerk)!=null&&d.user)){r.notify({type:"negative",position:"top",message:"\u0423\u043F\u0441! \u041D\u0430\u0434\u043E \u0441\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u043E\u0439\u0442\u0438 \u0432 \u0430\u043A\u043A\u0430\u0443\u043D\u0442!"});return}const u=(c=window.Clerk)==null?void 0:c.user;if(n.id===u.id){r.notify({type:"warning",position:"top",message:"\u041D\u0435\u043B\u044C\u0437\u044F \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0447\u0430\u0442 \u0441 \u0441\u0430\u043C\u0438\u043C \u0441\u043E\u0431\u043E\u0439!"});return}console.log("cur",n),console.log("us",u);try{const{data:o}=await t({sender_id:u.id,consumer_id:n.id,sender_avatar:u.profileImageUrl,sender_firstName:u.firstName,consumer_avatar:n.avatar_url,consumer_firstName:n.first_name});console.log(o)}catch(o){console.log(o)}};return(u,d)=>(T(),P(Te,{class:"flex items-center justify-between",clickable:"",onClick:d[1]||(d[1]=c=>l.value=!0)},{default:S(()=>[E("div",_a,[C(Ke,{src:e.currentUser.avatar_url},null,8,["src"])]),E("div",null,[E("div",wa,X(e.currentUser.first_name),1)]),C(Et,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=c=>l.value=c),persistent:""},{default:S(()=>[C(At,null,{default:S(()=>[C(Vt,{class:"row items-center"},{default:S(()=>[Ca]),_:1}),C(Qt,{align:"right"},{default:S(()=>[Se(C(ee,{flat:"",label:"\u041D\u0435\u0442",color:"primary"},null,512),[[Ve]]),Se(C(ee,{flat:"",label:"\u0414\u0430",color:"primary",onClick:a},null,512),[[Ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},xa={__name:"UsersList",props:{usersList:{type:Array,default:()=>[]}},setup(e){return(n,r)=>(T(),P(Ge,null,{default:S(()=>[(T(!0),Le(Xe,null,Ye(e.usersList,l=>(T(),P(qa,{key:l.id,currentUser:l},null,8,["currentUser"]))),128))]),_:1}))}},za={__name:"MainLayout",setup(e){Ft(Wt);const n=x(null),{result:r}=je(fa),{result:l,refetch:t}=Nt(Kt,{user_id:n==null?void 0:n.id});w(n,p=>{t({user_id:p.id})});const a=It(),u=x(!1),d=x(!1);Y(()=>{const p=setInterval(()=>{var g;n.value=(g=window.Clerk)==null?void 0:g.user,n.value&&clearInterval(p)},500)});const c=()=>{u.value=!u.value},o=()=>{d.value=!d.value},s=p=>{a.commit("chat/CHANGE_CHAT",p)};return j("user",n),j("selectChat",s),j("toggleLeftDrawer",c),j("toggleRightDrawer",o),(p,g)=>{const m=Rt("router-view");return T(),P(ta,{view:"hHh Lpr lFf"},{default:S(()=>[C(la),C(Ie,{side:"left",title:"\u0421\u043F\u0438\u0441\u043E\u043A \u0447\u0430\u0442\u043E\u0432",modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=f=>u.value=f)},{list:S(()=>{var f;return[C(ba,{"chats-list":(f=B(l))==null?void 0:f.chats,class:"q-mt-md"},null,8,["chats-list"])]}),_:1},8,["modelValue"]),C(Ie,{side:"right",title:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439",modelValue:d.value,"onUpdate:modelValue":g[1]||(g[1]=f=>d.value=f)},{list:S(()=>{var f;return[C(xa,{"users-list":(f=B(r))==null?void 0:f.users,class:"q-mt-md"},null,8,["users-list"])]}),_:1},8,["modelValue"]),C(Gt,null,{default:S(()=>[C(m,null,{default:S(({Component:f})=>[(T(),P(Ut,null,[(T(),P(Ht(f)))],1024))]),_:1})]),_:1})]),_:1})}}};export{za as default};
